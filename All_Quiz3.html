<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPSC Quiz Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #f72585;
            --success-color: #4cc9f0;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --card-bg: #ffffff;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--dark-color);
            padding-bottom: 40px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 25px 0;
            box-shadow: 0 4px 20px rgba(67, 97, 238, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            background: rgba(255, 255, 255, 0.2);
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            backdrop-filter: blur(10px);
        }

        .logo-text h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .logo-text p {
            opacity: 0.9;
            font-size: 14px;
        }

        .search-container {
            flex-grow: 1;
            max-width: 500px;
            margin-left: 30px;
        }

        .search-box {
            position: relative;
            width: 100%;
        }

        .search-box input {
            width: 100%;
            padding: 16px 20px 16px 50px;
            border-radius: 50px;
            border: none;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            font-size: 16px;
            backdrop-filter: blur(10px);
            transition: var(--transition);
        }

        .search-box input::placeholder {
            color: rgba(255, 255, 255, 0.8);
        }

        .search-box input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
        }

        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 18px;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 30px;
            margin-top: 40px;
        }

        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Subjects Panel */
        .subjects-panel {
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: var(--shadow);
            overflow: hidden;
            height: fit-content;
        }

        .panel-header {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-header h2 {
            font-size: 22px;
            font-weight: 600;
        }

        .subjects-count {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
        }

        .subjects-list {
            padding: 10px;
            max-height: 600px;
            overflow-y: auto;
        }

        .subject-item {
            display: flex;
            align-items: center;
            padding: 18px 20px;
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: var(--transition);
            border-left: 5px solid transparent;
        }

        .subject-item:hover {
            background: #f8f9ff;
            transform: translateX(5px);
        }

        .subject-item.active {
            background: #f0f3ff;
            border-left-color: var(--primary-color);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.1);
        }

        .subject-item.new-update::after {
            content: "New";
            background: var(--accent-color);
            color: white;
            font-size: 10px;
            font-weight: 700;
            padding: 3px 10px;
            border-radius: 10px;
            margin-left: auto;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .subject-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 22px;
        }

        .subject-info h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .subject-info p {
            font-size: 13px;
            color: #666;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Quizzes Panel */
        .quizzes-panel {
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: var(--shadow);
            overflow: hidden;
            min-height: 600px;
        }

        .quizzes-header {
            padding: 25px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .quizzes-header h2 {
            font-size: 22px;
            font-weight: 600;
            color: var(--dark-color);
        }

        .quizzes-count {
            background: var(--primary-color);
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
        }

        .quizzes-list {
            padding: 25px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            min-height: 400px;
        }

        @media (max-width: 768px) {
            .quizzes-list {
                grid-template-columns: 1fr;
            }
        }

        .quiz-card {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid #eee;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .quiz-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .quiz-card.new::before {
            content: "NEW";
            position: absolute;
            top: 15px;
            right: -30px;
            background: var(--accent-color);
            color: white;
            padding: 5px 35px;
            font-size: 11px;
            font-weight: 700;
            transform: rotate(45deg);
        }

        .quiz-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .quiz-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--dark-color);
            line-height: 1.4;
            flex: 1;
        }

        .quiz-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #4cc9f0, #4361ee);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
            margin-left: 15px;
        }

        .quiz-details {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .quiz-detail {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #666;
        }

        .quiz-detail i {
            color: var(--primary-color);
            font-size: 16px;
        }

        .quiz-actions {
            display: flex;
            gap: 12px;
        }

        .action-btn {
            flex: 1;
            padding: 14px 20px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 15px;
        }

        .preview-btn {
            background: #f0f3ff;
            color: var(--primary-color);
        }

        .preview-btn:hover {
            background: #e1e7ff;
            transform: translateY(-2px);
        }

        .start-btn {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(67, 97, 238, 0.4);
        }

        .start-btn:active {
            transform: translateY(0);
        }

        /* Empty State */
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
        }

        .empty-icon {
            font-size: 70px;
            color: #ddd;
            margin-bottom: 20px;
        }

        .empty-state h3 {
            font-size: 22px;
            color: #999;
            margin-bottom: 10px;
        }

        .empty-state p {
            color: #aaa;
            max-width: 400px;
            margin: 0 auto;
        }

        /* Stats Footer */
        .stats-footer {
            margin-top: 40px;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .stat-card {
            text-align: center;
            padding: 20px;
            border-radius: 16px;
            background: #f8f9ff;
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            background: white;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
        }

        .stat-value {
            font-size: 42px;
            font-weight: 800;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Modal for Quiz Start */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            padding: 40px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            transform: translateY(30px);
            transition: transform 0.4s ease;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .modal-header h2 {
            font-size: 26px;
            color: var(--dark-color);
            margin-bottom: 10px;
        }

        .modal-header p {
            color: #666;
        }

        .modal-body {
            margin-bottom: 30px;
        }

        .quiz-info {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #ddd;
        }

        .info-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
        }

        .modal-btn {
            flex: 1;
            padding: 16px;
            border-radius: 12px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 16px;
        }

        .cancel-btn {
            background: #f0f3ff;
            color: var(--primary-color);
        }

        .cancel-btn:hover {
            background: #e1e7ff;
        }

        .confirm-start-btn {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
        }

        .confirm-start-btn:hover {
            box-shadow: 0 8px 20px rgba(67, 97, 238, 0.4);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .search-container {
                margin-left: 0;
                width: 100%;
            }
            
            .logo-area {
                flex-direction: column;
                text-align: center;
            }
            
            .modal-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-area">
                    <div class="logo-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="logo-text">
                        <h1>UPSC Quiz Master</h1>
                        <p>Test your knowledge with interactive quizzes</p>
                    </div>
                </div>
                <div class="search-container">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="Search subjects or quizzes...">
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="main-content">
            <!-- Subjects Panel -->
            <div class="subjects-panel">
                <div class="panel-header">
                    <h2>Subjects</h2>
                    <div class="subjects-count" id="subjectsCount">0 subjects</div>
                </div>
                <div class="subjects-list" id="subjectsList">
                    <!-- Subjects will be loaded here -->
                </div>
            </div>

            <!-- Quizzes Panel -->
            <div class="quizzes-panel">
                <div class="quizzes-header">
                    <h2 id="quizzesTitle">Select a Subject</h2>
                    <div class="quizzes-count" id="quizzesCount">0 quizzes</div>
                </div>
                <div class="quizzes-list" id="quizzesList">
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="far fa-folder-open"></i>
                        </div>
                        <h3>No Subject Selected</h3>
                        <p>Choose a subject from the left panel to view available quizzes</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Footer -->
        <div class="stats-footer">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalSubjects">0</div>
                    <div class="stat-label">Total Subjects</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalQuizzes">0</div>
                    <div class="stat-label">Available Quizzes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="newUpdates">0</div>
                    <div class="stat-label">New Updates</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="htmlFiles">0</div>
                    <div class="stat-label">HTML Quiz Files</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Quiz Start -->
    <div class="modal-overlay" id="quizModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalQuizTitle">Start Quiz</h2>
                <p id="modalQuizSubject">Subject: Loading...</p>
            </div>
            <div class="modal-body">
                <div class="quiz-info">
                    <div class="info-row">
                        <span>Questions:</span>
                        <span id="modalQuestionsCount">0</span>
                    </div>
                    <div class="info-row">
                        <span>Duration:</span>
                        <span id="modalDuration">0 min</span>
                    </div>
                    <div class="info-row">
                        <span>Difficulty:</span>
                        <span id="modalDifficulty">Medium</span>
                    </div>
                </div>
                <p id="modalDescription">This quiz will test your knowledge on the selected topic. Make sure you're ready before starting.</p>
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel-btn" id="cancelQuiz">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="modal-btn confirm-start-btn" id="confirmStart">
                    <i class="fas fa-play-circle"></i> Start Quiz Now
                </button>
            </div>
        </div>
    </div>

    <script>
        // Repository data
        const repositories = [
            "DineshIAS96/CA_Mag",
            "DineshIAS96/NCERTTest", 
            "DineshIAS96/NCERTJS",
            "DineshIAS96/RS_Sharma_Test",
            "DineshIAS96/CA_JS",
            "DineshIAS96/RS_Sharma_JS",
            "DineshIAS96/Vocab",
            "DineshIAS96/CSS",
            "DineshIAS96/UPSCP",
            "DineshIAS96/History",
            "DineshIAS96/form-animation",
            "DineshIAS96/Env_JS",
            "DineshIAS96/Env_Test",
            "DineshIAS96/Polity_JS",
            "DineshIAS96/Polity_Test",
            "DineshIAS96/UPSCP_Vear_wire_PYQ_JS"
        ];

        // Process repositories to create subjects (exclude _JS folders)
        const subjects = repositories
            .filter(repo => !repo.includes("_JS") && !repo.includes("form-animation"))
            .map((repo, index) => {
                const name = repo.split('/')[1];
                
                // Convert to readable subject names
                const subjectName = name
                    .replace(/_/g, ' ')
                    .replace('Test', '')
                    .replace('CA Mag', 'Current Affairs')
                    .replace('NCERT', 'NCERT ')
                    .replace('RS Sharma', 'Ancient History')
                    .replace('UPSCP', 'UPSC Prelims')
                    .replace('Vear wire PYQ', 'PYQ')
                    .replace('Env', 'Environment')
                    .replace('Polity', 'Polity')
                    .replace('Vocab', 'Vocabulary')
                    .trim();
                
                // Generate HTML file name for each subject
                const htmlFiles = [
                    `${name.toLowerCase()}_quiz_1.html`,
                    `${name.toLowerCase()}_quiz_2.html`,
                    `${name.toLowerCase()}_quiz_3.html`
                ];
                
                return {
                    id: name,
                    name: subjectName,
                    repo: repo,
                    hasNewUpdate: index < 4, // First 4 subjects have new updates
                    quizCount: Math.floor(Math.random() * 5) + 2, // 2-6 quizzes
                    htmlFiles: htmlFiles,
                    icon: getSubjectIcon(subjectName)
                };
            });

        // Get appropriate icon for each subject
        function getSubjectIcon(subjectName) {
            const icons = {
                'Current Affairs': 'fas fa-newspaper',
                'NCERT': 'fas fa-book-open',
                'Ancient History': 'fas fa-landmark',
                'Vocabulary': 'fas fa-language',
                'CSS': 'fab fa-css3-alt',
                'UPSC Prelims': 'fas fa-file-alt',
                'History': 'fas fa-history',
                'Environment': 'fas fa-leaf',
                'Polity': 'fas fa-balance-scale',
                'PYQ': 'fas fa-calendar-check'
            };
            
            for (const [key, icon] of Object.entries(icons)) {
                if (subjectName.includes(key)) return icon;
            }
            
            return 'fas fa-folder';
        }

        // Quizzes data for each subject
        const quizzesData = {
            "CA_Mag": [
                { id: 1, title: "Current Affairs - January 2023", questions: 20, duration: "30 min", difficulty: "Medium", isNew: true, htmlFile: "1.1.PRISON_REFORMS.html" },
                { id: 2, title: "Current Affairs - December 2022", questions: 25, duration: "35 min", difficulty: "Medium", isNew: false, htmlFile: "ca_mag_quiz_2.html" },
                { id: 3, title: "Editorial Analysis - The Hindu", questions: 15, duration: "25 min", difficulty: "Easy", isNew: false, htmlFile: "ca_mag_quiz_3.html" }
            ],
            "NCERTTest": [
                { id: 1, title: "NCERT History - Class 6", questions: 15, duration: "20 min", difficulty: "Easy", isNew: false, htmlFile: "ncerttest_quiz_1.html" },
                { id: 2, title: "NCERT Geography - Class 7", questions: 20, duration: "25 min", difficulty: "Medium", isNew: false, htmlFile: "ncerttest_quiz_2.html" },
                { id: 3, title: "NCERT Polity - Class 8", questions: 18, duration: "22 min", difficulty: "Medium", isNew: true, htmlFile: "ncerttest_quiz_3.html" }
            ],
            "RS_Sharma_Test": [
                { id: 1, title: "Ancient India - Part 1", questions: 25, duration: "35 min", difficulty: "Hard", isNew: false, htmlFile: "rs_sharma_test_quiz_1.html" },
                { id: 2, title: "Ancient India - Part 2", questions: 25, duration: "35 min", difficulty: "Hard", isNew: false, htmlFile: "rs_sharma_test_quiz_2.html" },
                { id: 3, title: "Medieval India", questions: 30, duration: "40 min", difficulty: "Hard", isNew: true, htmlFile: "rs_sharma_test_quiz_3.html" }
            ],
            "Vocab": [
                { id: 1, title: "The Hindu Vocabulary - Week 1", questions: 20, duration: "25 min", difficulty: "Easy", isNew: false, htmlFile: "vocab_quiz_1.html" },
                { id: 2, title: "The Hindu Vocabulary - Week 2", questions: 20, duration: "25 min", difficulty: "Easy", isNew: false, htmlFile: "vocab_quiz_2.html" },
                { id: 3, title: "Advanced English Words", questions: 25, duration: "30 min", difficulty: "Medium", isNew: true, htmlFile: "vocab_quiz_3.html" }
            ],
            "CSS": [
                { id: 1, title: "CSS Selectors Mastery", questions: 15, duration: "20 min", difficulty: "Easy", isNew: false, htmlFile: "css_quiz_1.html" },
                { id: 2, title: "Flexbox and Grid", questions: 20, duration: "25 min", difficulty: "Medium", isNew: true, htmlFile: "css_quiz_2.html" }
            ],
            "UPSCP": [
                { id: 1, title: "Prelims Paper 1 - General Studies", questions: 100, duration: "2 hours", difficulty: "Hard", isNew: false, htmlFile: "upscp_quiz_1.html" },
                { id: 2, title: "Prelims Paper 2 - CSAT", questions: 80, duration: "2 hours", difficulty: "Hard", isNew: true, htmlFile: "upscp_quiz_2.html" }
            ],
            "History": [
                { id: 1, title: "Ancient History", questions: 30, duration: "45 min", difficulty: "Medium", isNew: false, htmlFile: "history_quiz_1.html" },
                { id: 2, title: "Medieval History", questions: 30, duration: "45 min", difficulty: "Medium", isNew: false, htmlFile: "history_quiz_2.html" },
                { id: 3, title: "Modern History", questions: 35, duration: "50 min", difficulty: "Hard", isNew: true, htmlFile: "history_quiz_3.html" }
            ],
            "Env_Test": [
                { id: 1, title: "Ecology and Ecosystems", questions: 20, duration: "30 min", difficulty: "Medium", isNew: false, htmlFile: "env_test_quiz_1.html" },
                { id: 2, title: "Climate Change", questions: 25, duration: "35 min", difficulty: "Hard", isNew: true, htmlFile: "env_test_quiz_2.html" },
                { id: 3, title: "Biodiversity", questions: 22, duration: "32 min", difficulty: "Medium", isNew: false, htmlFile: "env_test_quiz_3.html" }
            ],
            "Polity_Test": [
                { id: 1, title: "Indian Constitution", questions: 30, duration: "45 min", difficulty: "Hard", isNew: false, htmlFile: "polity_test_quiz_1.html" },
                { id: 2, title: "Fundamental Rights", questions: 25, duration: "35 min", difficulty: "Medium", isNew: false, htmlFile: "polity_test_quiz_2.html" },
                { id: 3, title: "Parliament and State Legislatures", questions: 28, duration: "40 min", difficulty: "Hard", isNew: true, htmlFile: "polity_test_quiz_3.html" }
            ]
        };

        // DOM Elements
        const subjectsListEl = document.getElementById('subjectsList');
        const subjectsCountEl = document.getElementById('subjectsCount');
        const quizzesListEl = document.getElementById('quizzesList');
        const quizzesTitleEl = document.getElementById('quizzesTitle');
        const quizzesCountEl = document.getElementById('quizzesCount');
        const searchInputEl = document.getElementById('searchInput');
        const totalSubjectsEl = document.getElementById('totalSubjects');
        const totalQuizzesEl = document.getElementById('totalQuizzes');
        const newUpdatesEl = document.getElementById('newUpdates');
        const htmlFilesEl = document.getElementById('htmlFiles');
        const quizModalEl = document.getElementById('quizModal');
        const modalQuizTitleEl = document.getElementById('modalQuizTitle');
        const modalQuizSubjectEl = document.getElementById('modalQuizSubject');
        const modalQuestionsCountEl = document.getElementById('modalQuestionsCount');
        const modalDurationEl = document.getElementById('modalDuration');
        const modalDifficultyEl = document.getElementById('modalDifficulty');
        const modalDescriptionEl = document.getElementById('modalDescription');
        const cancelQuizBtn = document.getElementById('cancelQuiz');
        const confirmStartBtn = document.getElementById('confirmStart');

        let selectedSubjectId = null;
        let currentSelectedQuiz = null;

        // Initialize the application
        function init() {
            renderSubjects();
            updateStats();
            
            // Select first subject by default
            if (subjects.length > 0) {
                selectSubject(subjects[0].id);
            }
            
            // Setup event listeners
            searchInputEl.addEventListener('input', handleSearch);
            cancelQuizBtn.addEventListener('click', closeModal);
            confirmStartBtn.addEventListener('click', startQuiz);
            
            // Close modal when clicking outside
            quizModalEl.addEventListener('click', (e) => {
                if (e.target === quizModalEl) {
                    closeModal();
                }
            });
        }

        // Render subjects list
        function renderSubjects(filteredSubjects = subjects) {
            subjectsListEl.innerHTML = '';
            
            if (filteredSubjects.length === 0) {
                subjectsListEl.innerHTML = `
                    <div style="text-align: center; padding: 30px; color: #999;">
                        <i class="fas fa-search" style="font-size: 40px; margin-bottom: 15px;"></i>
                        <p>No subjects found matching your search</p>
                    </div>
                `;
                return;
            }
            
            filteredSubjects.forEach(subject => {
                const subjectItem = document.createElement('div');
                subjectItem.className = `subject-item ${selectedSubjectId === subject.id ? 'active' : ''} ${subject.hasNewUpdate ? 'new-update' : ''}`;
                subjectItem.dataset.id = subject.id;
                
                subjectItem.innerHTML = `
                    <div class="subject-icon">
                        <i class="${subject.icon}"></i>
                    </div>
                    <div class="subject-info">
                        <h3>${subject.name}</h3>
                        <p><i class="fas fa-question-circle"></i> ${subject.quizCount} quizzes</p>
                    </div>
                `;
                
                subjectItem.addEventListener('click', () => selectSubject(subject.id));
                subjectsListEl.appendChild(subjectItem);
            });
            
            subjectsCountEl.textContent = `${filteredSubjects.length} ${filteredSubjects.length === 1 ? 'subject' : 'subjects'}`;
        }

        // Select a subject and show its quizzes
        function selectSubject(subjectId) {
            selectedSubjectId = subjectId;
            
            // Update active class
            document.querySelectorAll('.subject-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.id === subjectId) {
                    item.classList.add('active');
                }
            });
            
            // Find the subject
            const subject = subjects.find(s => s.id === subjectId);
            if (!subject) return;
            
            // Update quizzes title
            quizzesTitleEl.textContent = subject.name;
            
            // Get quizzes for this subject
            const quizzes = quizzesData[subjectId] || [];
            
            // Update quiz count
            quizzesCountEl.textContent = `${quizzes.length} ${quizzes.length === 1 ? 'quiz' : 'quizzes'}`;
            
            // Render quizzes
            renderQuizzes(quizzes, subject.name);
        }

        // Render quizzes list
        function renderQuizzes(quizzes, subjectName) {
            quizzesListEl.innerHTML = '';
            
            if (quizzes.length === 0) {
                quizzesListEl.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="far fa-file-alt"></i>
                        </div>
                        <h3>No Quizzes Available</h3>
                        <p>There are no quizzes available for this subject yet.</p>
                    </div>
                `;
                return;
            }
            
            quizzes.forEach(quiz => {
                const quizCard = document.createElement('div');
                quizCard.className = `quiz-card ${quiz.isNew ? 'new' : ''}`;
                quizCard.dataset.quizId = quiz.id;
                
                quizCard.innerHTML = `
                    <div class="quiz-card-header">
                        <div class="quiz-title">${quiz.title}</div>
                        <div class="quiz-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                    </div>
                    <div class="quiz-details">
                        <div class="quiz-detail">
                            <i class="fas fa-question-circle"></i>
                            <span>${quiz.questions} questions</span>
                        </div>
                        <div class="quiz-detail">
                            <i class="far fa-clock"></i>
                            <span>${quiz.duration}</span>
                        </div>
                        <div class="quiz-detail">
                            <i class="fas fa-chart-line"></i>
                            <span>${quiz.difficulty}</span>
                        </div>
                    </div>
                    <div class="quiz-actions">
                        <button class="action-btn preview-btn" data-action="preview" data-quiz-id="${quiz.id}">
                            <i class="far fa-eye"></i> Preview
                        </button>
                        <button class="action-btn start-btn" data-action="start" data-quiz-id="${quiz.id}">
                            <i class="fas fa-play-circle"></i> Start Quiz
                        </button>
                    </div>
                `;
                
                quizzesListEl.appendChild(quizCard);
            });
            
            // Add event listeners to quiz buttons
            document.querySelectorAll('.preview-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const quizId = this.dataset.quizId;
                    previewQuiz(quizId, subjectName);
                });
            });
            
            document.querySelectorAll('.start-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const quizId = this.dataset.quizId;
                    showStartModal(quizId, subjectName);
                });
            });
        }

        // Show preview for a quiz
        function previewQuiz(quizId, subjectName) {
            const subject = subjects.find(s => s.id === selectedSubjectId);
            const quiz = quizzesData[selectedSubjectId].find(q => q.id == quizId);
            
            if (quiz) {
                alert(`Preview: ${quiz.title}\n\nThis quiz has ${quiz.questions} questions and takes ${quiz.duration} to complete.\n\nHTML file: ${quiz.htmlFile}`);
            }
        }

        // Show modal to start a quiz
        function showStartModal(quizId, subjectName) {
            const subject = subjects.find(s => s.id === selectedSubjectId);
            const quiz = quizzesData[selectedSubjectId].find(q => q.id == quizId);
            
            if (!quiz) return;
            
            currentSelectedQuiz = quiz;
            
            // Update modal content
            modalQuizTitleEl.textContent = quiz.title;
            modalQuizSubjectEl.textContent = `Subject: ${subjectName}`;
            modalQuestionsCountEl.textContent = quiz.questions;
            modalDurationEl.textContent = quiz.duration;
            modalDifficultyEl.textContent = quiz.difficulty;
            modalDescriptionEl.textContent = `This quiz will test your knowledge on ${subjectName}. The quiz contains ${quiz.questions} questions and should be completed within ${quiz.duration}.`;
            
            // Show modal
            quizModalEl.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close the modal
        function closeModal() {
            quizModalEl.classList.remove('active');
            document.body.style.overflow = 'auto';
            currentSelectedQuiz = null;
        }

        // Start the quiz (opens HTML file)
        function startQuiz() {
            if (!currentSelectedQuiz) return;
            
            const quiz = currentSelectedQuiz;
            const htmlFile = quiz.htmlFile;
            
            // In a real implementation, this would open the HTML file
            // For demo purposes, we'll show an alert and simulate opening
            alert(`Starting quiz: ${quiz.title}\n\nOpening HTML file: ${htmlFile}\n\nIn a real implementation, this would open ${htmlFile} in a new tab or load it in an iframe.`);
            
            // Simulate opening the HTML file (in real implementation, use window.open or load in iframe)
            // window.open(htmlFile, '_blank');
            
            closeModal();
        }

        // Handle search functionality
        function handleSearch() {
            const searchTerm = searchInputEl.value.toLowerCase().trim();
            
            if (searchTerm === '') {
                renderSubjects();
                return;
            }
            
            const filteredSubjects = subjects.filter(subject => 
                subject.name.toLowerCase().includes(searchTerm) ||
                subject.id.toLowerCase().includes(searchTerm)
            );
            
            renderSubjects(filteredSubjects);
            
            // If we have filtered results, select the first one if current selection is not in filtered list
            if (filteredSubjects.length > 0 && selectedSubjectId) {
                const isSelectedInFiltered = filteredSubjects.some(s => s.id === selectedSubjectId);
                if (!isSelectedInFiltered) {
                    selectSubject(filteredSubjects[0].id);
                }
            } else if (filteredSubjects.length > 0) {
                selectSubject(filteredSubjects[0].id);
            } else {
                // No results found
                quizzesTitleEl.textContent = "Search Results";
                quizzesCountEl.textContent = "0 quizzes";
                quizzesListEl.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>No Results Found</h3>
                        <p>No subjects match your search. Try a different keyword.</p>
                    </div>
                `;
            }
        }

        // Update statistics
        function updateStats() {
            // Total subjects
            totalSubjectsEl.textContent = subjects.length;
            
            // Total quizzes
            let totalQuizzes = 0;
            subjects.forEach(subject => {
                const quizzes = quizzesData[subject.id] || [];
                totalQuizzes += quizzes.length;
            });
            totalQuizzesEl.textContent = totalQuizzes;
            
            // New updates
            const newUpdates = subjects.filter(s => s.hasNewUpdate).length;
            newUpdatesEl.textContent = newUpdates;
            
            // HTML files count
            let htmlFilesCount = 0;
            subjects.forEach(subject => {
                htmlFilesCount += subject.htmlFiles.length;
            });
            htmlFilesEl.textContent = htmlFilesCount;
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
